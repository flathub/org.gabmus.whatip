{
    "app-id": "org.gabmus.whatip",
    "command": "whatip",
    "runtime": "org.gnome.Platform",
    "runtime-version": "42",
    "sdk": "org.gnome.Sdk",
    "finish-args": [
        "--device=dri",
        "--share=ipc",
        "--socket=fallback-x11",
        "--share=network",
        "--socket=wayland",
        "--socket=system-bus"
    ],
    "cleanup": [
        "/usr"
    ],
    "modules": [
        "python-deps.json",
        {
            "name": "blueprint-compiler",
            "buildsystem": "meson",
            "sources": [
                {
                    "type": "git",
                    "url": "https://gitlab.gnome.org/jwestman/blueprint-compiler",
                    "branch": "main",
                    "commit": "4cf966eafa433fc8e77b3ae3c5f5622290e68bc4"
                }
            ]
        },
        {
            "name": "iproute2",
            "buildsystem": "simple",
            "build-commands": [
                "./configure",
                "make",
                "make PREFIX=\"/app\" DESTDIR=\"/app\" SBINDIR=\"/bin\" install"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://mirrors.edge.kernel.org/pub/linux/utils/net/iproute2/iproute2-5.17.0.tar.xz",
                    "sha256": "6e384f1b42c75e1a9daac57866da37dcff909090ba86eb25a6e764da7893660e"
                }
            ]
        },
        {
            "name": "iputils",
            "buildsystem": "meson",
            "config-opts": [
                "-DUSE_CAP=false",
                "-DUSE_IDN=false",
                "-DBUILD_ARPING=false",
                "-DBUILD_CLOCKDIFF=false",
                "-DBUILD_RARPD=false",
                "-DBUILD_RDISC=false",
                "-DENABLE_RDISC_SERVER=false",
                "-DBUILD_TFTPD=false",
                "-DBUILD_TRACEPATH=false",
                "-DBUILD_TRACEROUTE6=false",
                "-DBUILD_NINFOD=false",
                "-DNINFOD_MESSAGES=false",
                "-DBUILD_MANS=false",
                "-DBUILD_HTML_MANS=false",
                "-DNO_SETCAP_OR_SUID=false",
                "-DSETCAP_OR_SUID_ARPING=false",
                "-DSETCAP_OR_SUID_CLOCKDIFF=false",
                "-DSETCAP_OR_SUID_PING=false",
                "-DSETCAP_OR_SUID_TRACEROUTE6=false",
                "-DUSE_GETTEXT=false"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/iputils/iputils/archive/refs/tags/20211215.tar.gz",
                    "sha256": "b6f67fc705490673ff4471d006221b4a2f1b1180b929d9fefd771352621ccedf"
                }
            ]
        },
        {
            "name": "libdaemon",
            "buildsystem": "autotools",
            "config-opts": [
                "--prefix=/app"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://0pointer.de/lennart/projects/libdaemon/libdaemon-0.14.tar.gz",
                    "sha256": "fd23eb5f6f986dcc7e708307355ba3289abe03cc381fc47a80bca4a50aa6b834"
                },
                {
                    "type": "shell",
                    "commands": [
                        "cp -p /usr/share/automake-*/config.{sub,guess} ."
                    ]
                }
            ]
        },
        {
            "name": "libevent",
            "buildsystem": "autotools",
            "config-opts": [
                "--prefix=/app"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/libevent/libevent",
                    "tag": "release-2.1.12-stable"
                }
            ]
        },
        {
            "name": "avahi",
            "buildsystem": "autotools",
            "config-opts": [
                "--prefix=/app",
                "--with-distro=none",
                "--disable-gtk3",
                "--disable-mono",
                "--disable-qt5",
                "--disable-manpages",
                "--disable-python",
                "--with-systemdsystemunitdir=no"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/lathiat/avahi",
                    "tag": "v0.8"
                }
            ]
        },
        {
            "name": "whatip",
            "buildsystem": "meson",
            "builddir": true,
            "config-opts": [
                "--buildtype=release"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://gitlab.gnome.org/GabMus/whatip",
                    "tag": "1.1"
                }
            ]
        }
    ]
}
